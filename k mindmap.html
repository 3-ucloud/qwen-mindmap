<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mind-Map First â€“ Own Cloud Hub</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React-Flow CDN -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-flow-renderer@10.3.17/dist/umd/index.js"></script>

  <!-- Apple font & background -->
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background: #f5f5f5;
    }
  </style>
</head>

<body>
  <div id="root" class="w-screen h-screen"></div>

  <script type="text/babel">
    const { useState, useCallback } = React;
    const {
      ReactFlow,
      Background,
      Controls,
      useNodesState,
      useEdgesState,
      addEdge,
    } = ReactFlowRenderer;

    /* ---------- MOCK DATA ---------- */
    const initialNodes = [
      {
        id: 'hub',
        type: 'default',
        data: { label: 'Own Cloud Hub' },
        position: { x: 400, y: 200 },
        style: {
          width: 200,
          height: 200,
          background: 'rgba(255,255,255,0.35)',
          backdropFilter: 'blur(8px)',
          borderRadius: '1.5rem',
          boxShadow: '0 6px 20px rgba(0,0,0,0.08)',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          fontWeight: 600,
          fontSize: 18,
        },
      },
      { id: 'usb',   data: { label: 'ðŸ”Œ USB' },   position: { x: 150, y: 120 }, draggable: true },
      { id: 'phone', data: { label: 'ðŸ“± Phone' }, position: { x: 650, y: 120 }, draggable: true },
      { id: 'drive', data: { label: 'â˜ï¸ Drive' }, position: { x: 650, y: 280 }, draggable: true },
      { id: 'gmail', data: { label: 'ðŸ“§ Gmail' }, position: { x: 150, y: 280 }, draggable: true },
      { id: 'router',data: { label: 'ðŸ“¡ Router' },position: { x: 150, y: 440 }, draggable: true },
      { id: 'pc',    data: { label: 'ðŸ’» PC' },    position: { x: 650, y: 440 }, draggable: true },
    ];

    const initialEdges = [
      { id: 'e-hub-usb',   source: 'hub', target: 'usb',   animated: true },
      { id: 'e-hub-phone', source: 'hub', target: 'phone', animated: true },
      { id: 'e-hub-drive', source: 'hub', target: 'drive', animated: true },
      { id: 'e-hub-gmail', source: 'hub', target: 'gmail', animated: true },
      { id: 'e-hub-router',source: 'hub', target: 'router',animated: true },
      { id: 'e-hub-pc',    source: 'hub', target: 'pc',    animated: true },
    ];

    const treeData = {
      usb:   [{ name: 'Photos', status: 'âœ”' }, { name: 'Videos', status: 'â¬œ' }],
      phone: [{ name: 'Photos', status: 'âœ”' }, { name: 'Docs', status: 'â³' }],
      drive: [{ name: 'Reports', status: 'â¬œ' }, { name: 'Archive', status: 'âœ”' }],
      gmail: [{ name: 'Receipts', status: 'â³' }, { name: 'Invoices', status: 'â¬œ' }],
      router:[{ name: 'Backups', status: 'âœ”' }],
      pc:    [{ name: 'Games', status: 'â¬œ' }, { name: 'Projects', status: 'âœ”' }],
    };

    /* ---------- APP ---------- */
    function App() {
      const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);
      const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);
      const [drawerOpen, setDrawerOpen] = useState(false);
      const [activeNode, setActiveNode] = useState(null);

      const onConnect = useCallback(
        (params) => setEdges((eds) => addEdge(params, eds)),
        [setEdges]
      );

      const onNodeClick = (_evt, node) => {
        if (node.id === 'hub') return;
        setActiveNode(node.id);
        setDrawerOpen(true);
      };

      const closeDrawer = () => setDrawerOpen(false);

      return (
        <div className="relative w-screen h-screen">
          <ReactFlow
            nodes={nodes}
            edges={edges}
            onNodesChange={onNodesChange}
            onEdgesChange={onEdgesChange}
            onConnect={onConnect}
            onNodeClick={onNodeClick}
            fitView
            fitViewOptions={{ padding: 0.2 }}
          >
            <Background color="#ddd" gap={16} />
            <Controls />
          </ReactFlow>

          {/* Drawer */}
          {drawerOpen && activeNode && (
            <div
              className="absolute top-0 right-0 h-full w-[340px] bg-white shadow-xl z-10 flex flex-col"
            >
              <header className="flex items-center justify-between p-4 border-b">
                <h2 className="text-lg font-semibold capitalize">{activeNode}</h2>
                <button
                  onClick={closeDrawer}
                  className="text-2xl leading-none px-2 hover:bg-gray-100 rounded"
                >
                  Ã—
                </button>
              </header>

              <ul className="p-4 space-y-2 overflow-y-auto">
                {(treeData[activeNode] || []).map((item) => (
                  <li
                    key={item.name}
                    className="flex items-center justify-between px-2 py-1 rounded hover:bg-gray-100"
                  >
                    <span>{item.name}</span>
                    <span>{item.status}</span>
                  </li>
                ))}
              </ul>
            </div>
          )}
        </div>
      );
    }

    /* ---------- MOUNT ---------- */
    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>

  <!-- Babel for in-browser JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</body>
</html>
